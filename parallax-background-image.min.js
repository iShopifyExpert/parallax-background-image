var Parallax=function(a,h){"use strict";function j(ba,ca){function da(){this.constructor=ba}M(ba,ca),ba.prototype=null===ca?Object.create(ca):(da.prototype=ca.prototype,new da)}function k(ba,ca,da,ea){var ha,fa=arguments.length,ga=3>fa?ca:null===ea?ea=Object.getOwnPropertyDescriptor(ca,da):ea;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)ga=Reflect.decorate(ba,ca,da,ea);else for(var ia=ba.length-1;0<=ia;ia--)(ha=ba[ia])&&(ga=(3>fa?ha(ga):3<fa?ha(ca,da,ga):ha(ca,da))||ga);return 3<fa&&ga&&Object.defineProperty(ca,da,ga),ga}function l(ba,ca,da,ea){return new(da||(da=Promise))(function(fa,ga){function ha(ka){try{ja(ea.next(ka))}catch(la){ga(la)}}function ia(ka){try{ja(ea.throw(ka))}catch(la){ga(la)}}function ja(ka){ka.done?fa(ka.value):new da(function(la){la(ka.value)}).then(ha,ia)}ja((ea=ea.apply(ba,ca||[])).next())})}function m(ba,ca){function da(ka){return function(la){return ea([ka,la])}}function ea(ka){if(ga)throw new TypeError("Generator is already executing.");for(;fa;)try{if(ga=1,ha&&(ia=ha[2&ka[0]?"return":ka[0]?"throw":"next"])&&!(ia=ia.call(ha,ka[1])).done)return ia;switch((ha=0,ia)&&(ka=[0,ia.value]),ka[0]){case 0:case 1:ia=ka;break;case 4:return fa.label++,{value:ka[1],done:!1};case 5:fa.label++,ha=ka[1],ka=[0];continue;case 7:ka=fa.ops.pop(),fa.trys.pop();continue;default:if((ia=fa.trys,!(ia=0<ia.length&&ia[ia.length-1]))&&(6===ka[0]||2===ka[0])){fa=0;continue}if(3===ka[0]&&(!ia||ka[1]>ia[0]&&ka[1]<ia[3])){fa.label=ka[1];break}if(6===ka[0]&&fa.label<ia[1]){fa.label=ia[1],ia=ka;break}if(ia&&fa.label<ia[2]){fa.label=ia[2],fa.ops.push(ka);break}ia[2]&&fa.ops.pop(),fa.trys.pop();continue;}ka=ca.call(ba,fa)}catch(la){ka=[6,la],ha=0}finally{ga=ia=0}if(5&ka[0])throw ka[1];return{value:ka[0]?ka[1]:void 0,done:!0}}var ga,ha,ia,ja,fa={label:0,sent:function(){if(1&ia[0])throw ia[1];return ia[1]},trys:[],ops:[]};return ja={next:da(0),"throw":da(1),"return":da(2)},"function"==typeof Symbol&&(ja[Symbol.iterator]=function(){return this}),ja}function o(ba,ca){return void 0===ca&&(ca=document),"string"==typeof ba?ca.querySelector(ba):ba}function q(ba,ca){return void 0===ca&&(ca=document),ba instanceof Element?[ba]:Array.isArray(ba)?ba:("string"==typeof ba&&(ba=ca.querySelectorAll(ba)),Array.prototype.slice.call(ba))}function u(ba){return"function"==typeof ba?ba:function(){return ba}}function w(ba){var ca=this,da=u(ba);return function(){for(var ea=[],fa=0;fa<arguments.length;fa++)ea[fa]=arguments[fa];return new Promise(function(ga){return ga(da.apply(ca,ea))})}}function x(ba,ca){return w(ca)(ba).then(z)}function z(ba){return new Promise(function(ca,da){var ea=document.createElement("img");ea.onload=function(fa){ca(fa.target)},ea.onerror=function(fa){da(fa.error)},ea.src=ba})}function A(ba){return ba.match(/url\(['"]?(.*?)['"]?\)/)[1]}function C(){var ba=D();return document.head.insertBefore(ba,document.head.firstElementChild),ba.sheet}function D(){var ba=document.createElement("style");return ba.appendChild(document.createTextNode("")),ba}function E(ba,ca){return void 0===ca&&(ca=null),function(da,ea){var fa=ba(da,ea);return new T(fa,ca||da)}}function F(ba){return N({},X,ba)}function G(ba,ca){var da=1/ba.velocityScale,ea=ba.viewport;return{scale:da,translateX:ba.left*(da-1),translateY:((ea.height-ca.height)*da-(ea.height-ba.height))/2,translateZ:ea.perspective*(1-da)}}function H(ba,ca){var da=ba.viewport,ea=da.top+da.height/2,fa=ba.top+ba.height/2,ga=ba.top+ca.height/2;return{scale:1,translateX:0,translateY:(fa-ea)*(ba.velocityScale-1)-(ga-fa),translateZ:0}}function I(ba,ca,da){return function(ea){return N({},ea,{translateX:ea.translateX-(ca.width-ba.width)*ea.scale*da})}}function K(){var ba=navigator.userAgent;return-1!==ba.indexOf("Chrome/")&&-1===ba.indexOf("Edge/")}function L(ba){ba.style.setProperty("background","none","important"),ba.style.setProperty("background-image","none","important")}var M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ba,ca){ba.__proto__=ca}||function(ba,ca){for(var da in ca)ca.hasOwnProperty(da)&&(ba[da]=ca[da])},N=Object.assign||function(ca){for(var da,ea=1,fa=arguments.length;ea<fa;ea++)for(var ga in da=arguments[ea],da)Object.prototype.hasOwnProperty.call(da,ga)&&(ca[ga]=da[ga]);return ca},O="data-parallax-element",Q=function(ba){var ca=window.getComputedStyle(ba);return A(ca.backgroundImage)},R=function(){function ba(ca,da,ea){this.style=ca,this.width=da,this.height=ea,h.scheduler.write(function(){ca.position="absolute",ca.left="0",ca.top="0",ca.transformOrigin="0 0 0",ca.pointerEvents="none"})}return ba.prototype.updateTransform=function(ca){var da=this,ea="\n            translateX("+ca.translateX+"px)\n            translateY("+ca.translateY+"px)\n            translateZ("+ca.translateZ+"px)\n            scale("+ca.scale+", "+ca.scale+")";h.scheduler.write(function(){da.style.transform=ea})},ba}(),S=function(){function ba(ca){this.background=ca}return ba.prototype.updateTransform=function(ca){this.background.updateTransform(N({},ca,{scale:ca.scale*this.scale}))},Object.defineProperty(ba.prototype,"height",{get:function(){return this.background.height*this.scale},enumerable:!0,configurable:!0}),Object.defineProperty(ba.prototype,"width",{get:function(){return this.background.width*this.scale},enumerable:!0,configurable:!0}),ba}();k([a.computed],S.prototype,"height",null),k([a.computed],S.prototype,"width",null);var T=function(ba){function ca(da,ea){var fa=ba.call(this,da)||this;return fa.element=ea,fa}return j(ca,ba),Object.defineProperty(ca.prototype,"scale",{get:function(){return Math.max(this.minimalHeight/this.background.height,this.minimalWidth/this.background.width)},enumerable:!0,configurable:!0}),Object.defineProperty(ca.prototype,"minimalHeight",{get:function(){var da=this.element.viewport.height,ea=this.element,fa=ea.height,ga=ea.velocityScale;return da+ga*(da-fa)},enumerable:!0,configurable:!0}),Object.defineProperty(ca.prototype,"minimalWidth",{get:function(){return this.element.width},enumerable:!0,configurable:!0}),ca}(S);k([a.computed],T.prototype,"scale",null),k([a.computed],T.prototype,"minimalHeight",null),k([a.computed],T.prototype,"minimalWidth",null);var V=function(ba,ca){var da=document.createElement("img");return h.scheduler.write(function(){da.height=ca.naturalHeight,da.width=ca.naturalWidth,da.src=ca.src,ba.element.insertBefore(da,ba.element.firstElementChild)}),new R(da.style,ca.naturalWidth,ca.naturalHeight)},W=function(){var ba=D();return document.head.appendChild(ba),ba.sheet}(),X={velocityScale:0.8,horizontalAlign:0.5,backgroundImage:Q,createBackground:E(V)},Y=function(){function ba(ca){var da=this;this.bottom=0,this.height=0,this.left=0,this.right=0,this.top=0,this.width=0;var ea=function(){da.update(ca.getBoundingClientRect()),h.scheduler.read(ea)};h.scheduler.read(ea)}return ba.prototype.update=function(ca){this.bottom=ca.bottom,this.height=ca.height,this.left=ca.left,this.right=ca.right,this.top=ca.top,this.width=ca.width},ba}();k([a.observable],Y.prototype,"bottom",void 0),k([a.observable],Y.prototype,"height",void 0),k([a.observable],Y.prototype,"left",void 0),k([a.observable],Y.prototype,"right",void 0),k([a.observable],Y.prototype,"top",void 0),k([a.observable],Y.prototype,"width",void 0),k([a.action],Y.prototype,"update",null);var Z=function(){function ba(ca,da){ca.style.overflowY="scroll",ca.style.webkitOverflowScrolling="touch",ca.style.transformStyle="flat",da!==Infinity&&(ca.style.perspective=da+"px",ca.style.perspectiveOrigin="0 0"),this.element=ca,this.perspective=da,this.boundingClientRect=new Y(ca)}return Object.defineProperty(ba.prototype,"height",{get:function(){return this.boundingClientRect.height},enumerable:!0,configurable:!0}),Object.defineProperty(ba.prototype,"top",{get:function(){return this.boundingClientRect.top},enumerable:!0,configurable:!0}),ba}();k([a.computed],Z.prototype,"height",null),k([a.computed],Z.prototype,"top",null);var $=function(){function ba(ca,da,ea){var fa=this;this.id=ba.getNextId(),this.element=ca,this.boundingClientRect=new Y(ca),this.viewport=da,this.velocityScale=ea,h.scheduler.write(function(){fa.element.setAttribute(O,fa.id)})}return Object.defineProperty(ba.prototype,"width",{get:function(){return this.boundingClientRect.width},enumerable:!0,configurable:!0}),Object.defineProperty(ba.prototype,"height",{get:function(){return this.boundingClientRect.height},enumerable:!0,configurable:!0}),Object.defineProperty(ba.prototype,"left",{get:function(){return this.boundingClientRect.left},enumerable:!0,configurable:!0}),Object.defineProperty(ba.prototype,"top",{get:function(){return this.boundingClientRect.top},enumerable:!0,configurable:!0}),ba.getNextId=function(){return""+ba.nextId++},ba}();$.nextId=0,k([a.computed],$.prototype,"width",null),k([a.computed],$.prototype,"height",null),k([a.computed],$.prototype,"left",null),k([a.computed],$.prototype,"top",null),function(){var ba=C();ba.insertRule("\n        ["+O+"] > * {\n            position: relative;\n        }\n    ",0),ba.insertRule("\n        ["+O+"] {\n            position: relative;\n            overflow: hidden;\n        }\n    ",0)}();var aa=function(){function ba(ca,da,ea){void 0===da&&(da=!K()),void 0===ea&&(ea=1e3),da&&(ea=Infinity),this.useFallback=da,this.viewport=new Z(o(ca),ea)}return ba.prototype.add=function(ca,da){var ea=this;void 0===da&&(da={});var fa=F(da);if(0>fa.velocityScale)throw new RangeError("velocityScale must be positive");return q(ca,this.viewport.element).filter(function(ga){return!ga.hasAttribute(O)}).map(function(ga){return ea.addElement(ga,fa)})},ba.prototype.addElement=function(ca,da){return l(this,void 0,void 0,function(){var ea,fa,ga,ha,ia;return m(this,function(ja){switch(ja.label){case 0:return[4,x(ca,da.backgroundImage)];case 1:return ea=ja.sent(),fa=new $(ca,this.viewport,da.velocityScale),L(ca),ga=da.createBackground(fa,ea),ha=this.useFallback?H:G,ia=I(fa,ga,da.horizontalAlign),a.autorun(function(){var ka=ha(fa,ga);ga.updateTransform(ia(ka))}),[2];}})})},ba}();return aa.getCSSBackgroundImage=Q,aa.pesudoBefore=function(ba,ca){var da="["+O+"=\""+ba.id+"\"]::before {\n        content: '';\n        width: "+ca.naturalWidth+"px;\n        height: "+ca.naturalHeight+"px;\n        background-image: url("+ca.src+");\n        background-size: 100% 100%;\n    }",ea=W.insertRule(da,0),fa=W.cssRules[ea].style;return new R(fa,ca.naturalWidth,ca.naturalHeight)},aa.insertImg=V,aa.coverElement=E,aa}(mobx,domScheduler);
