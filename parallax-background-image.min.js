var parallax=function(e){"use strict";function i(e){void 0===e&&(e="");var t=document.createElement("style");return t.appendChild(document.createTextNode(e)),t}var t="parallax-background-image-viewport",n="parallax-background-image-viewport-3d",r="parallax-background-image-element";var s=function(e,t,i){this.element=e,this.imageWidth=t.naturalWidth,this.imageHeight=t.naturalHeight,this.transform_=i.transform(e,t,i),this.renderer=new i.renderer(e,t,i),this.bgRect={x:NaN,y:NaN,z:NaN,w:NaN,h:NaN},this.dirty=!1,this.disposed=!1,this._setupStyle()};s.prototype.updateRect=function(e,t){if(!this.disposed){var i,n,r,o,s={x:0,y:0,z:0,w:this.imageWidth,h:this.imageHeight};this.transform_(s,e,t),r=this.bgRect,o=s,(r.x!==o.x||r.y!==o.y||r.z!==o.z||r.w!==o.w||r.h!==o.h)&&(this.dirty=!0,i=this.bgRect,n=s,i.x=n.x,i.y=n.y,i.z=n.z,i.w=n.w,i.h=n.h)}},s.prototype.render=function(){this.disposed||this.dirty&&(this.dirty=!1,this.renderer.render(this.bgRect))},s.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.element.classList.remove(r),this.renderer.dispose())},s.prototype._setupStyle=function(){this.element.classList.add(r)};var o=function(e,t){"string"==typeof e&&(e=document.querySelector(e)),this.viewport=e,this.options=t,this.elements=[],this._setupStyle(),this._monitorRects(),this._startRenderLoop()};function a(e){var t=e.getBoundingClientRect();return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2,w:t.right-t.left,h:t.bottom-t.top}}function d(e,t){e.x-=t.x,e.y-=t.y}function h(e,t){return e instanceof Element?[e]:("string"==typeof e&&(e=t.querySelectorAll(e)),Array.prototype.slice.call(e))}function l(e,t){e.x*=t,e.y*=t,e.z*=t,e.w*=t,e.h*=t}function c(n){return n=function(e){if("left"===e)return 0;if("center"===e)return.5;if("right"===e)return 1;var t=parseFloat(e);return isNaN(t)?.5:t/100}(n),function(e,t,i){e.x=(.5-n)*(e.w-t.w)}}function u(n){return function(e,t,i){l(e,1/n),e.z+=1-1/n,e.x-=t.x*(1-1/n)}}function p(n){return function(e,t,i){e.y+=t.y*(n-1)}}function m(e,t,i){e.position="absolute",e.left="50%",e.top="50%",e.width=t+"px",e.height=i+"px",e.transformOrigin="center center 0",e.pointerEvents="none"}function g(e,t,i,n){e.transform="translateX("+(t.x-i/2)+"px)translateY("+(t.y-n/2)+"px)translateZ("+t.z+"px)scale("+t.w/i+", "+t.h/n+")"}o.prototype.add=function(e,i){var o=this;return void 0===i&&(i={}),e=h(e,this.viewport),i=Object.assign({},this.options,i),e.map(function(t){return(n=i.image,r=t,new Promise(function(t,i){"function"==typeof n&&(n=n(r));var e=document.createElement("img");e.onload=function(e){t(e.target)},e.onerror=function(e){i(e.error)},e.src=n})).then(function(e){o.elements.push(new s(t,e,i)),o._updateRects()});var n,r})},o.prototype.remove=function(e){e=h(e,document);for(var t=0;t<e.length;++t)this._removeElement(element)},o.prototype._setupStyle=function(){this.viewport.classList.add(t),this.options.use3d&&this.viewport.classList.add(n)},o.prototype._monitorRects=function(){var e=this._updateRects.bind(this);window.addEventListener("resize",e),this.options.use3d||this.viewport.addEventListener("scroll",e)},o.prototype._updateRects=function(){for(var e=a(this.viewport),t=0;t<this.elements.length;++t){var i=this.elements[t],n=a(i.element);d(n,e),i.updateRect(n,e)}},o.prototype._startRenderLoop=function(){var i=this.elements;window.requestAnimationFrame(function e(){for(var t=0;t<i.length;++t)i[t].render();window.requestAnimationFrame(e)})},o.prototype._removeElement=function(e){for(var t=0;t<this.elements.length;++t)if(this.elements[t].element===e)return this.elements[t].dispose(),void this.elements.splice(t,1)};var f=function(e,t,i){var n=this;this.element=e,this.imageWidth=t.naturalWidth,this.imageHeight=t.naturalHeight,this.img=document.createElement("img"),this.style=this.img.style,this.disposed=!1,window.requestAnimationFrame(function(){n.disposed||(n.img.src=t.src,m(n.style,n.imageWidth,n.imageHeight),n.element.prepend(n.img))})};f.prototype.render=function(e){this.disposed||g(this.style,e,this.imageWidth,this.imageHeight)},f.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.element.removeChild(this.img))};var v=function(e){void 0===e&&(e="");var t=i(e);return document.head.appendChild(t),t.sheet}(),y=0,w=function(e,t,i){var n=this;this.element=e,this.imageWidth=t.naturalWidth,this.imageHeight=t.naturalHeight;var r,o,s,a,d=y++;this.className="parallax-background-image-pseudo-"+d,this.style=(r="."+this.className+"::before",s=r+" {}",a=(o=v).insertRule(s,0),o.cssRules[a].style),this.disposed=!1,window.requestAnimationFrame(function(){n.disposed||(n.style.content='""',n.style.backgroundImage="url("+t.src+")",n.style.backgroundSize="100% 100%",m(n.style,n.imageWidth,n.imageHeight),n.element.classList.add(n.className))})};w.prototype.render=function(e){this.disposed||g(this.style,e,this.imageWidth,this.imageHeight)},w.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.element.classList.remove(this.className))},function(e){void 0===e&&(e="");var t=i(e);document.head.insertBefore(t,document.head.firstElementChild),t.sheet}("\n.parallax-background-image-element {\n  position: relative;\n  overflow: hidden !important;\n  background: none !important;\n  background-image: none !important;\n}\n\n.parallax-background-image-element > * {\n  position: relative;\n}\n\n.parallax-background-image-viewport {\n  overflow-x: hidden !important;\n  overflow-y: scroll !important;\n  -webkit-overflow-scrolling: touch;\n}\n\n.parallax-background-image-viewport-3d {\n  perspective: 1px !important;\n  perspective-origin: center center !important;\n}");var x,b={use3d:(x=navigator.userAgent,-1!==x.indexOf("Chrome/")&&-1===x.indexOf("Edge/")),velocity:.8,alignX:"center",renderer:f,transform:function(e,t,i){var a,n=i.use3d?u:p,r=(a=i.velocity,function(e,t,i){var n=t.w,r=i.h+a*(i.h-t.h),o=n/e.w,s=r/e.h;l(e,Math.max(o,s))}),o=c(i.alignX),s=n(i.velocity);return function(e,t,i){r(e,t,i),o(e,t,i),s(e,t,i)}},image:function(e){var t=window.getComputedStyle(e);return/url\(['"]?(.*?)['"]?\)/.exec(t.backgroundImage)[1]}};return e.createViewport=function(e,t){return void 0===t&&(t={}),t=Object.assign({},b,t),new o(e,t)},e.ImageElementRenderer=f,e.PseudoElementRenderer=w,e}({});