var parallax=function(e,f){"use strict";function i(e,t){return void 0===t&&(t=document),e instanceof Element?[e]:("string"==typeof e&&(e=t.querySelectorAll(e)),Array.prototype.slice.call(e))}function o(e,t,n){var r,i;return i="function"==typeof(r=t)?r:function(){return r},(t=function(){return Promise.resolve(i.apply(this,arguments))})(e,n).then(a)}function a(r){return new Promise(function(t,n){var e=document.createElement("img");e.onload=function(e){t(e.target)},e.onerror=function(e){n(e.error)},e.src=r})}function n(e){void 0===e&&(e="");var t=document.createElement("style");return t.appendChild(document.createTextNode(e)),t}var s="parallax-background-image-viewport",u="parallax-background-image-viewport-3d",c="parallax-background-image-element";function m(e){var t=e.getBoundingClientRect();return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2,w:t.right-t.left,h:t.bottom-t.top}}var r=function(e,t){var n,r;this.viewport=(n=e,void 0===r&&(r=document),"string"==typeof n?r.querySelector(n):n),this.options=t,this.entries=[],this.viewport.classList.add(s),t.use3d&&this.viewport.classList.add(u),this._observe()};function l(e,t){e.x*=t,e.y*=t,e.z*=t,e.w*=t,e.h*=t}function d(s){return function(e,t,n){var r=t.w,i=n.h+s*(n.h-t.h),o=r/e.w,a=i/e.h;l(e,Math.max(o,a))}}function h(r){return r=function(e){if("left"===e)return 0;if("center"===e)return.5;if("right"===e)return 1;var t=parseFloat(e);return isNaN(t)?.5:t/100}(r),function(e,t,n){e.x=(.5-r)*(e.w-t.w)}}function p(r){return function(e,t,n){l(e,1/r),e.z+=1-1/r,e.x-=t.x*(1-1/r)}}function v(r){return function(e,t,n){e.y+=t.y*(r-1)}}function g(i){return function(e,t,n){for(var r=0;r<i.length;++r)i[r](e,t,n)}}function y(s,u,c){return f.scheduler.write(function(){s.position="absolute",s.left="50%",s.top="50%",s.transformOrigin="center center 0",s.pointerEvents="none"}),function(e){var t=e.x,n=e.y,r=e.z,i=e.w,o=e.h,a="translate(-50%, -50%)translate3d("+t+"px, "+n+"px, "+r+"px)scale("+i/u+", "+o/c+")";f.scheduler.write(function(){s.transform=a})}}function w(t){var n=!1,r=null;return function(e){n&&e.x===r.x&&e.y===r.y&&e.z===r.z&&e.w===r.w&&e.h===r.h||(n=!0,t(r=e))}}r.prototype._observe=function(){var d=this,h=function(){for(var e,t,n=m(d.viewport),r=0;r<d.entries.length;++r){var i=d.entries[r],o=i.element,a=i.transform,s=i.renderer,u=i.initialBg,c=m(o);t=n,(e=c).x-=t.x,e.y-=t.y;var l=Object.assign({},u);a(l,c,n),s.render(l)}f.scheduler.read(h)};f.scheduler.read(h)},r.prototype.add=function(e,n){var r=this;return void 0===n&&(n={}),e=i(e,this.viewport),n=Object.assign({},this.options,n),e.map(function(t){return o(t,n.backgroundImage).then(function(e){r._addElement(t,e,n)})})},r.prototype._addElement=function(e,t,n){this._removeElement(e),e.classList.add(c);var r=n.transform(e,t,n),i=new n.renderer(e,t,n),o={x:0,y:0,z:0,w:t.naturalWidth,h:t.naturalHeight};this.entries.push({element:e,transform:r,renderer:i,initialBg:o})},r.prototype.remove=function(e){var t=this;i(e).forEach(function(e){return t._removeElement(e)})},r.prototype._removeElement=function(e){for(var t=0;t<this.entries.length&&this.entries[t].element!==e;)++t;if(t!==this.entries.length){var n=this.entries.splice(t,1)[0];n.element.classList.remove(c),n.renderer.dispose()}},function(e){void 0===e&&(e="");var t=n(e);document.head.insertBefore(t,document.head.firstElementChild),t.sheet}("\n."+c+" {\n  position: relative;\n  overflow: hidden;\n  background: none !important;\n  background-image: none !important;\n}\n\n."+c+" > * {\n  position: relative;\n}\n\n."+s+" {\n  overflow-y: scroll;\n  -webkit-overflow-scrolling: touch;\n}\n\n."+u+" {\n  perspective: 1px;\n  perspective-origin: center center;\n  transform-style: flat;\n}");var t=function(e,t,n){var r=this;this.element=e,this.img=document.createElement("img"),f.scheduler.write(function(){r.img.width=t.naturalWidth,r.img.height=t.naturalHeight,r.img.src=t.src,r.element.prepend(r.img)}),this.render=w(y(this.img.style,t.naturalWidth,t.naturalHeight))};t.prototype.dispose=function(){this.element.removeChild(this.img)};var x=function(e){void 0===e&&(e="");var t=n(e);return document.head.appendChild(t),t.sheet}(),b=0,E=function(e,t,n){this.element=e;var r=b++;this.className="parallax-background-image-pseudo-"+r,this.element.classList.add(this.className);var i="."+this.className+"::before {\n      content: '';\n      width: "+t.naturalWidth+"px;\n      height: "+t.naturalHeight+"px;\n      background-image: url("+t.src+");\n      background-size: 100% 100%;\n    }",o=x.insertRule(i,0),a=x.cssRules[o].style;this.render=w(y(a,t.naturalWidth,t.naturalHeight))};E.prototype.dispose=function(){this.element.classList.remove(this.className)};var k,z={use3d:(k=navigator.userAgent,-1!==k.indexOf("Chrome/")&&-1===k.indexOf("Edge/")),velocity:.8,alignX:"center",renderer:t,transform:function(e,t,n){var r=n.use3d?p:v;return g([d(n.velocity),h(n.alignX),r(n.velocity)])},backgroundImage:function(e,t){var n=window.getComputedStyle(e);return/url\(['"]?(.*?)['"]?\)/.exec(n.backgroundImage)[1]}};return e.createViewport=function(e,t){return void 0===t&&(t={}),t=Object.assign({},z,t),new r(e,t)},e.coverElement=d,e.alignX=h,e.parallax2d=v,e.parallax3d=p,e.chainTransforms=g,e.ImageElementRenderer=t,e.PseudoElementRenderer=E,e}({},domScheduler);