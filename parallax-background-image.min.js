var parallax=function(e){"use strict";function n(e){for(var n=e.length,t=0;t<n;++t)e.shift()()}var t=function(){this.reads=[],this.writes=[],this.running=!1};t.prototype.read=function(e){this.reads.push(e),this.running||this.run()},t.prototype.write=function(e){this.writes.push(e),this.running||this.run()},t.prototype.run=function(){var e=this;this.running=!0,window.requestAnimationFrame(function(){n(e.reads),n(e.writes),0===e.reads.length&&0===e.writes.length?e.running=!1:e.run()})};var r=new t;function i(e,n){return void 0===n&&(n=document),e instanceof Element?[e]:("string"==typeof e&&(e=n.querySelectorAll(e)),Array.prototype.slice.call(e))}function o(e,n,t){var r,i;return i="function"==typeof(r=n)?r:function(){return r},(n=function(){return Promise.resolve(i.apply(this,arguments))})(e,t).then(a)}function a(r){return new Promise(function(n,t){var e=document.createElement("img");e.onload=function(e){n(e.target)},e.onerror=function(e){t(e.error)},e.src=r})}function s(e){void 0===e&&(e="");var n=document.createElement("style");return n.appendChild(document.createTextNode(e)),n}var u="parallax-background-image-viewport",c="parallax-background-image-viewport-3d",l="parallax-background-image-element";function p(e){var n=e.getBoundingClientRect();return{x:(n.left+n.right)/2,y:(n.top+n.bottom)/2,w:n.right-n.left,h:n.bottom-n.top}}var d=function(e,n){var t,r,i=n.use3d,o=n.scheduler;t=e,void 0===r&&(r=document),e="string"==typeof t?r.querySelector(t):t,this.viewport=e,this.options=n,this.entries=[],e.classList.add(u),i&&e.classList.add(c),this._observe(e,this.entries,o)};function h(e,n){e.x*=n,e.y*=n,e.z*=n,e.w*=n,e.h*=n}function f(s){return function(e,n,t){var r=n.w,i=t.h+s*(t.h-n.h),o=r/e.w,a=i/e.h;h(e,Math.max(o,a))}}function m(r){return r=function(e){if("left"===e)return 0;if("center"===e)return.5;if("right"===e)return 1;var n=parseFloat(e);return isNaN(n)?.5:n/100}(r),function(e,n,t){e.x=(.5-r)*(e.w-n.w)}}function v(r){return function(e,n,t){h(e,1/r),e.z+=1-1/r,e.x-=n.x*(1-1/r)}}function g(r){return function(e,n,t){e.y+=n.y*(r-1)}}function w(i){return function(e,n,t){for(var r=0;r<i.length;++r)i[r](e,n,t)}}function y(s,e,u){var c=e.naturalWidth,l=e.naturalHeight;return u.write(function(){s.position="absolute",s.left="50%",s.top="50%",s.transformOrigin="center center 0",s.pointerEvents="none"}),function(e){var n=e.x,t=e.y,r=e.z,i=e.w,o=e.h,a="translate(-50%, -50%)translate3d("+n+"px, "+t+"px, "+r+"px)scale("+i/c+", "+o/l+")";u.write(function(){s.transform=a})}}function x(n){var t=!1,r=null;return function(e){t&&e.x===r.x&&e.y===r.y&&e.z===r.z&&e.w===r.w&&e.h===r.h||(t=!0,n(r=e))}}d.prototype._observe=function(d,h,f){var m=function(){for(var e,n,t=p(d),r=0;r<h.length;++r){var i=h[r],o=i.element,a=i.transform,s=i.renderer,u=i.initialBg,c=p(o);n=t,(e=c).x-=n.x,e.y-=n.y;var l=Object.assign({},u);a(l,c,t),s.render(l)}f.read(m)};f.read(m)},d.prototype.add=function(e,t){var r=this;return void 0===t&&(t={}),e=i(e,this.viewport),t=Object.assign({},this.options,t),e.map(function(n){return o(n,t.backgroundImage).then(function(e){r._addElement(n,e,t)})})},d.prototype._addElement=function(e,n,t){this._removeElement(e),e.classList.add(l);var r=t.transform(e,n,t),i=new t.renderer(e,n,t),o={x:0,y:0,z:0,w:n.naturalWidth,h:n.naturalHeight};this.entries.push({element:e,transform:r,renderer:i,initialBg:o})},d.prototype.remove=function(e){var n=this;i(e).forEach(function(e){return n._removeElement(e)})},d.prototype._removeElement=function(e){for(var n=0;n<this.entries.length&&this.entries[n].element!==e;)++n;if(n!==this.entries.length){var t=this.entries.splice(n,1)[0];t.element.classList.remove(l),t.renderer.dispose()}},function(e){void 0===e&&(e="");var n=s(e);document.head.insertBefore(n,document.head.firstElementChild),n.sheet}("\n."+l+" {\n  position: relative;\n  overflow: hidden;\n  background: none !important;\n  background-image: none !important;\n}\n\n."+l+" > * {\n  position: relative;\n}\n\n."+u+" {\n  overflow-y: scroll;\n  -webkit-overflow-scrolling: touch;\n}\n\n."+c+" {\n  perspective: 1px;\n  perspective-origin: center center;\n  transform-style: flat;\n}");var b=function(e,n,t){var r=this,i=t.scheduler;this.element=e,this.img=document.createElement("img"),i.write(function(){r.img.width=n.naturalWidth,r.img.height=n.naturalHeight,r.img.src=n.src,r.element.prepend(r.img)}),this.render=x(y(this.img.style,n,i))};b.prototype.dispose=function(){this.element.removeChild(this.img)};var E=function(e){void 0===e&&(e="");var n=s(e);return document.head.appendChild(n),n.sheet}(),k=0,z=function(e,n,t){var r=t.scheduler;this.element=e;var i=k++;this.className="parallax-background-image-pseudo-"+i,this.element.classList.add(this.className);var o="."+this.className+"::before {\n      content: '';\n      width: "+n.naturalWidth+"px;\n      height: "+n.naturalHeight+"px;\n      background-image: url("+n.src+");\n      background-size: 100% 100%;\n    }",a=E.insertRule(o,0),s=E.cssRules[a].style;this.render=x(y(s,n,r))};z.prototype.dispose=function(){this.element.classList.remove(this.className)};var C,N={use3d:(C=navigator.userAgent,-1!==C.indexOf("Chrome/")&&-1===C.indexOf("Edge/")),velocity:.8,alignX:"center",scheduler:r,renderer:b,transform:function(e,n,t){var r=t.use3d?v:g;return w([f(t.velocity),m(t.alignX),r(t.velocity)])},backgroundImage:function(e,n){var t=window.getComputedStyle(e);return/url\(['"]?(.*?)['"]?\)/.exec(t.backgroundImage)[1]}};return e.createViewport=function(e,n){return void 0===n&&(n={}),n=Object.assign({},N,n),new d(e,n)},e.coverElement=f,e.alignX=m,e.parallax2d=g,e.parallax3d=v,e.chainTransforms=w,e.ImageElementRenderer=b,e.PseudoElementRenderer=z,e}({});