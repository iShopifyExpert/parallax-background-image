(function(a){'use strict';function b(S,T=document){return'string'==typeof S?T.querySelector(S):S}function f(S,T=document){return S instanceof Element?[S]:Array.isArray(S)?S:('string'==typeof S&&(S=T.querySelectorAll(S)),Array.prototype.slice.call(S))}function g(S){return'function'==typeof S?S:()=>S}function h(S){const T=g(S);return function(){return x(this,arguments,void 0,function*(){return yield T.apply(this,arguments)})}}function j(S,T){return h(T)(S).then(k)}function k(S){return new Promise((T,U)=>{const V=document.createElement('img');V.onload=W=>{T(W.target)},V.onerror=W=>{U(W.error)},V.src=S})}function l(S){return S.match(/url\(['"]?(.*?)['"]?\)/)[1]}function n(){const S=o();return document.head.insertBefore(S,document.head.firstElementChild),S.sheet}function o(){const S=document.createElement('style');return S.appendChild(document.createTextNode('')),S}function p(S,T=null){return(U,V)=>{T=T||U;const W=S(U,V);return new E(W,T)}}function q(S){return Object.assign({},I,S)}function s(S,T){const U=1/S.velocityScale,V=S.viewport;return{scale:U,translateX:S.left*(U-1),translateY:((V.height-T.height)*U-(V.height-S.height))/2,translateZ:V.perspective*(1-U)}}function t(S,T){const U=S.viewport,V=U.top+U.height/2,W=S.top+S.height/2,X=U.height/2;if(Math.abs(W-V)-(U.height+S.height)/2>X)return null;const Y=S.top+T.height/2;return{scale:1,translateX:0,translateY:(W-V)*(S.velocityScale-1)-(Y-W),translateZ:0}}function v(){const{userAgent:S}=navigator;return S.includes('Chrome/')&&!S.includes('Edge/')}const w='data-parallax-element';var x=function(S,T,U,V){return new(U||(U=Promise))(function(W,X){function Y(_){try{$(V.next(_))}catch(aa){X(aa)}}function Z(_){try{$(V['throw'](_))}catch(aa){X(aa)}}function $(_){_.done?W(_.value):new U(function(aa){aa(_.value)}).then(Y,Z)}$((V=V.apply(S,T||[])).next())})};const y=S=>{const T=window.getComputedStyle(S);return l(T.backgroundImage)};const A=new class{constructor(){this.reads=[],this.writes=[]}read(S){this.reads.push(S)}write(S){this.writes.push(S)}runOnce(){const S=this.reads;this.reads=[],S.forEach(U=>U());const T=this.writes;this.writes=[],T.forEach(U=>U())}run(){const S=()=>{this.runOnce(),window.requestAnimationFrame(S)};S()}};var B=function(S,T,U,V){var Y,W=arguments.length,X=3>W?T:null===V?V=Object.getOwnPropertyDescriptor(T,U):V;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)X=Reflect.decorate(S,T,U,V);else for(var Z=S.length-1;0<=Z;Z--)(Y=S[Z])&&(X=(3>W?Y(X):3<W?Y(T,U,X):Y(T,U))||X);return 3<W&&X&&Object.defineProperty(T,U,X),X};class C{constructor(S,T,U){this.style=S,this.width=T,this.height=U,Object.assign(S,{position:'absolute',left:'0',top:'0',transformOrigin:'0 0 0',pointerEvents:'none'})}updateTransform(S){A.write(()=>{this.style.transform=`
                translateX(${S.translateX}px)
                translateY(${S.translateY}px)
                translateZ(${S.translateZ}px)
                scale(${S.scale}, ${S.scale})`})}}class D{constructor(S){this.background=S}updateTransform(S){this.background.updateTransform(Object.assign({},S,{scale:S.scale*this.scale}))}get height(){return this.background.height*this.scale}get width(){return this.background.width*this.scale}}B([a.computed],D.prototype,'height',null),B([a.computed],D.prototype,'width',null);class E extends D{constructor(S,T){super(S),this.element=T}get scale(){return Math.max(this.minimalHeight/this.background.height,this.minimalWidth/this.background.width)}get minimalHeight(){const{height:S}=this.element.viewport,{height:T,velocityScale:U}=this.element,V=1<U?T+(U-1)*(S+T):T+(1-U)*(S-T);return Math.max(V,S+U*(S-T))}get minimalWidth(){return this.element.width}}B([a.computed],E.prototype,'scale',null),B([a.computed],E.prototype,'minimalHeight',null),B([a.computed],E.prototype,'minimalWidth',null);const F=(S,T)=>{const U=`[${w}="${S.id}"]::before {
        content: '';
        width: ${T.naturalWidth}px;
        height: ${T.naturalHeight}px;
        background-image: url(${T.src});
        background-size: 100% 100%;
    }`,V=H.insertRule(U,0),W=H.cssRules[V].style;return new C(W,T.naturalWidth,T.naturalHeight)},H=function(){const S=o();return document.head.appendChild(S),S.sheet}(),I={velocityScale:0.8,backgroundImage:y,createBackground:p(F)};var J=function(S,T,U,V){var Y,W=arguments.length,X=3>W?T:null===V?V=Object.getOwnPropertyDescriptor(T,U):V;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)X=Reflect.decorate(S,T,U,V);else for(var Z=S.length-1;0<=Z;Z--)(Y=S[Z])&&(X=(3>W?Y(X):3<W?Y(T,U,X):Y(T,U))||X);return 3<W&&X&&Object.defineProperty(T,U,X),X};class K{constructor(S){const T=()=>{this.update(S.getBoundingClientRect()),A.read(T)};T()}update(S){for(let T of['bottom','height','left','right','top','width'])this[T]=S[T]}}J([a.observable],K.prototype,'bottom',void 0),J([a.observable],K.prototype,'height',void 0),J([a.observable],K.prototype,'left',void 0),J([a.observable],K.prototype,'right',void 0),J([a.observable],K.prototype,'top',void 0),J([a.observable],K.prototype,'width',void 0),J([a.action],K.prototype,'update',null);var L=function(S,T,U,V){var Y,W=arguments.length,X=3>W?T:null===V?V=Object.getOwnPropertyDescriptor(T,U):V;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)X=Reflect.decorate(S,T,U,V);else for(var Z=S.length-1;0<=Z;Z--)(Y=S[Z])&&(X=(3>W?Y(X):3<W?Y(T,U,X):Y(T,U))||X);return 3<W&&X&&Object.defineProperty(T,U,X),X};class M{constructor(S,T){Object.assign(S.style,{overflowY:'scroll',webkitOverflowScrolling:'touch',transformStyle:'flat',perspective:T+'px',perspectiveOrigin:'0 0'}),this.element=S,this.perspective=T,this.boundingClientRect=new K(S)}get height(){return this.boundingClientRect.height}get top(){return this.boundingClientRect.top}}L([a.computed],M.prototype,'height',null),L([a.computed],M.prototype,'top',null);var N=function(S,T,U,V){var Y,W=arguments.length,X=3>W?T:null===V?V=Object.getOwnPropertyDescriptor(T,U):V;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)X=Reflect.decorate(S,T,U,V);else for(var Z=S.length-1;0<=Z;Z--)(Y=S[Z])&&(X=(3>W?Y(X):3<W?Y(T,U,X):Y(T,U))||X);return 3<W&&X&&Object.defineProperty(T,U,X),X};class O{constructor(S,T,U){this.id=O.getNextId(),this.element=S,this.boundingClientRect=new K(S),this.viewport=T,this.velocityScale=U,this.element.setAttribute(w,this.id)}get width(){return this.boundingClientRect.width}get height(){return this.boundingClientRect.height}get left(){return this.boundingClientRect.left}get top(){return this.boundingClientRect.top}static getNextId(){return`${O.nextId++}`}}O.nextId=0,N([a.computed],O.prototype,'width',null),N([a.computed],O.prototype,'height',null),N([a.computed],O.prototype,'left',null),N([a.computed],O.prototype,'top',null);var Q=function(S,T,U,V){return new(U||(U=Promise))(function(W,X){function Y(_){try{$(V.next(_))}catch(aa){X(aa)}}function Z(_){try{$(V['throw'](_))}catch(aa){X(aa)}}function $(_){_.done?W(_.value):new U(function(aa){aa(_.value)}).then(Y,Z)}$((V=V.apply(S,T||[])).next())})};(function(){const S=n();S.insertRule(`
        [${w}] > * {
            position: relative;
        }
    `,0),S.insertRule(`
        [${w}] {
            position: relative;
            overflow: hidden;
        }
    `,0),A.run()})();class R{constructor(S,T=!v(),U=1e3){T&&(U=0),this.useFallback=T,this.viewport=new M(b(S),U)}add(S,T={}){const U=q(T);if(0>U.velocityScale)throw new RangeError('velocityScale must be positive');return f(S,this.viewport.element).filter(V=>!V.hasAttribute(w)).map(V=>this.addElement(V,U))}addElement(S,T){return Q(this,void 0,void 0,function*(){const U=yield j(S,T.backgroundImage),V=new O(S,this.viewport,T.velocityScale),W=T.createBackground(V,U),X=this.useFallback?t:s;a.autorun(()=>{const Y=X(V,W);null!=Y&&W.updateTransform(Y)})})}}R.scheduler=A,R.getCSSBackgroundImage=y,R.pesudoBefore=F,R.insertImg=(S,T)=>{const U=document.createElement('img');return U.height=T.naturalHeight,U.width=T.naturalWidth,U.src=T.src,S.element.insertBefore(U,S.element.firstElementChild),new C(U.style,T.naturalWidth,T.naturalHeight)},R.coverElement=p,window.Parallax=R})(mobx);
