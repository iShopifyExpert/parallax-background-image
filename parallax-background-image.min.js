var parallax=function(e){"use strict";function t(e){for(var t=e.length,n=0;n<t;++n)e.shift()()}var n=function(){this.reads=[],this.writes=[],this.running=!1};n.prototype.read=function(e){this.reads.push(e),this.running||this.run()},n.prototype.write=function(e){this.writes.push(e),this.running||this.run()},n.prototype.run=function(){var e=this;this.running=!0,window.requestAnimationFrame(function(){t(e.reads),t(e.writes),0===e.reads.length&&0===e.writes.length?e.running=!1:e.run()})};var r=new n;function i(e){void 0===e&&(e="");var t=document.createElement("style");return t.appendChild(document.createTextNode(e)),t}var a="parallax-background-image-viewport",s="parallax-background-image-viewport-3d",o="parallax-background-image-element";var u=function(e,t,n){this.element=e,this.transform=n.transform(e,t,n),this.renderer=new n.renderer(e,t,n),this.imageWidth=t.naturalWidth,this.imageHeight=t.naturalHeight,this.bgRect={x:NaN,y:NaN,z:NaN,w:NaN,h:NaN},this.dirty=!1,e.classList.add(o)};function c(e,t){return e instanceof Element?[e]:("string"==typeof e&&(e=t.querySelectorAll(e)),Array.prototype.slice.call(e))}function l(e,t,n){return(r=t,o="function"==typeof(i=r)?i:function(){return i},function(){return Promise.resolve(o.apply(this,arguments))}(e,n)).then(h);var r,i,o}function h(r){return new Promise(function(t,n){var e=document.createElement("img");e.onload=function(e){t(e.target)},e.onerror=function(e){n(e.error)},e.src=r})}function d(e){var t=e.getBoundingClientRect();return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2,w:t.right-t.left,h:t.bottom-t.top}}u.prototype.layout=function(e,t){var n,r,i,o,a={x:0,y:0,z:0,w:this.imageWidth,h:this.imageHeight};this.transform(a,e,t),null!=this.bgRect&&(i=this.bgRect,o=a,i.x===o.x&&i.y===o.y&&i.z===o.z&&i.w===o.w&&i.h===o.h)||(this.dirty=!0,n=this.bgRect,r=a,n.x=r.x,n.y=r.y,n.z=r.z,n.w=r.w,n.h=r.h)},u.prototype.render=function(){this.dirty&&(this.dirty=!1,this.renderer.render(this.bgRect))},u.prototype.dispose=function(){this.element.classList.remove(o),this.renderer.dispose()};var p=function(e,t){var n,r,i=t.use3d,o=t.scheduler;n=e,r=document,e="string"==typeof n?r.querySelector(n):n,this.viewport=e,this.options=t,this.elements=[],e.classList.add(a),i&&e.classList.add(s),this._startReadLoop(e,this.elements,o),this._startWriteLoop(this.elements,o)};function m(e,t){e.x*=t,e.y*=t,e.z*=t,e.w*=t,e.h*=t}function f(s){return function(e,t,n){var r=t.w,i=n.h+s*(n.h-t.h),o=r/e.w,a=i/e.h;m(e,Math.max(o,a))}}function g(r){return r=function(e){if("left"===e)return 0;if("center"===e)return.5;if("right"===e)return 1;var t=parseFloat(e);return isNaN(t)?.5:t/100}(r),function(e,t,n){e.x=(.5-r)*(e.w-t.w)}}function v(r){return function(e,t,n){m(e,1/r),e.z+=1-1/r,e.x-=t.x*(1-1/r)}}function y(r){return function(e,t,n){e.y+=t.y*(r-1)}}function w(e,t,n){e.position="absolute",e.left="50%",e.top="50%",e.width=t+"px",e.height=n+"px",e.transformOrigin="center center 0",e.pointerEvents="none"}function x(a,s,u){return function(e){var t=e.x,n=e.y,r=e.z,i=e.w,o=e.h;a.transform="translate(-50%, -50%)translate3d("+t+"px, "+n+"px, "+r+"px)scale("+i/s+", "+o/u+")"}}p.prototype._startReadLoop=function(a,s,u){u.read(function e(){for(var t,n,r=d(a),i=0;i<s.length;++i){var o=d(s[i].element);n=r,(t=o).x-=n.x,t.y-=n.y,s[i].layout(o,r)}u.read(e)})},p.prototype._startWriteLoop=function(n,r){r.write(function e(){for(var t=0;t<n.length;++t)n[t].render();r.write(e)})},p.prototype.add=function(e,n){var r=this;return void 0===n&&(n={}),e=c(e,this.viewport),n=Object.assign({},this.options,n),e.map(function(t){return l(t,n.backgroundImage).then(function(e){r.elements.push(new u(t,e,n))})})},p.prototype.remove=function(e){e=c(e,document);for(var t=0;t<e.length;++t)this._removeElement(element)},p.prototype._removeElement=function(e){for(var t=0;t<this.elements.length;++t)if(this.elements[t].element===e)return this.elements[t].dispose(),void this.elements.splice(t,1)};var b=function(e,t,n){var r=n.scheduler,i=document.createElement("img"),o=i.style,a=t.src,s=t.naturalWidth,u=t.naturalHeight;r.write(function(){i.src=a,e.prepend(i),w(o,s,u)}),this.element=e,this.img=i,this.render=x(o,s,u)};b.prototype.dispose=function(){this.element.removeChild(this.img)};var N=function(e){void 0===e&&(e="");var t=i(e);return document.head.appendChild(t),t.sheet}(),k=0,E=function(e,t,n){var r=n.scheduler;this.element=e;var i=k++;this.className="parallax-background-image-pseudo-"+i,this.element.classList.add(this.className);var o="."+this.className+"::before {}",a=N.insertRule(o,0),s=N.cssRules[a].style,u=t.src,c=t.naturalWidth,l=t.naturalHeight;r.write(function(){s.content="",s.backgroundImage="url("+u+")",s.backgroundSize="100% 100%",w(s,c,l)}),this.render=x(s,c,l)};E.prototype.dispose=function(){this.element.classList.remove(this.className)},function(e){void 0===e&&(e="");var t=i(e);document.head.insertBefore(t,document.head.firstElementChild),t.sheet}("\n.parallax-background-image-element {\n  position: relative;\n  overflow: hidden !important;\n  background: none !important;\n  background-image: none !important;\n}\n\n.parallax-background-image-element > * {\n  position: relative;\n}\n\n.parallax-background-image-viewport {\n  overflow-x: hidden !important;\n  overflow-y: scroll !important;\n  -webkit-overflow-scrolling: touch;\n}\n\n.parallax-background-image-viewport-3d {\n  perspective: 1px !important;\n  perspective-origin: center center !important;\n}");var R,z={use3d:(R=navigator.userAgent,-1!==R.indexOf("Chrome/")&&-1===R.indexOf("Edge/")),velocity:.8,alignX:"center",scheduler:r,renderer:b,transform:function(e,t,n){var r=n.use3d?v:y,i=f(n.velocity),o=g(n.alignX),a=r(n.velocity);return function(e,t,n){i(e,t,n),o(e,t,n),a(e,t,n)}},backgroundImage:function(e,t){var n=window.getComputedStyle(e);return/url\(['"]?(.*?)['"]?\)/.exec(n.backgroundImage)[1]}};return e.createViewport=function(e,t){return void 0===t&&(t={}),t=Object.assign({},z,t),new p(e,t)},e.coverElement=f,e.alignX=g,e.parallax2d=y,e.parallax3d=v,e.chainTransforms=function(i){return function(e,t,n){for(var r=0;r<i.length;++r)i[r](e,t,n)}},e.ImageElementRenderer=b,e.PseudoElementRenderer=E,e}({});