var parallax=function(t){"use strict";function i(t){var e=document.createElement("style");return e.appendChild(document.createTextNode(t)),e}var e="parallax-background-image-viewport",n="parallax-background-image-viewport-3d",r="parallax-background-image-element";function o(t){var a,n,e=t.use3d?d:h,r=(a=t.velocity,function(t,e,i){var n=e.w,r=i.h+a*(i.h-e.h),o=n/t.w,s=r/t.h;l(t,Math.max(o,s))}),o=(n=function(t){if("left"===t)return 0;if("center"===t)return.5;if("right"===t)return 1;var e=parseFloat(t);return isNaN(e)?.5:e/100}(n=t.alignX),function(t,e,i){t.x=(.5-n)*(t.w-e.w)}),s=e(t.velocity);return function(t,e,i){r(t,e,i),o(t,e,i),s(t,e,i)}}function l(t,e){t.x*=e,t.y*=e,t.z*=e,t.w*=e,t.h*=e}function d(n){return function(t,e,i){l(t,1/n),t.z+=1-1/n,t.x-=e.x*(1-1/n)}}function h(n){return function(t,e,i){t.y+=e.y*(n-1)}}var s=function(t,e,i){this.element=t,this.imageWidth=e.naturalWidth,this.imageHeight=e.naturalHeight,this.transform_=o(i),this.renderer=new i.renderer(t,e,i),this.bgRect={x:NaN,y:NaN,z:NaN,w:NaN,h:NaN},this.dirty=!1,this.disposed=!1,this._setupStyle()};s.prototype.updateRect=function(t,e){if(!this.disposed){var i,n,r,o,s={x:0,y:0,z:0,w:this.imageWidth,h:this.imageHeight};this.transform_(s,t,e),r=this.bgRect,o=s,(r.x!==o.x||r.y!==o.y||r.z!==o.z||r.w!==o.w||r.h!==o.h)&&(this.dirty=!0,i=this.bgRect,n=s,i.x=n.x,i.y=n.y,i.z=n.z,i.w=n.w,i.h=n.h)}},s.prototype.render=function(){this.disposed||this.dirty&&(this.dirty=!1,this.renderer.render(this.bgRect))},s.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.element.classList.remove(r),this.renderer.dispose())},s.prototype._setupStyle=function(){this.element.classList.add(r)};var a=function(t,e){"string"==typeof t&&(t=document.querySelector(t)),this.rootElement=t,this.options=e,this.parallaxElements=[],this._setupStyle(),this._monitorRects(),this._startRenderLoop()};function c(t){var e=t.getBoundingClientRect();return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2,w:e.right-e.left,h:e.bottom-e.top}}function p(t,e){t.x-=e.x,t.y-=e.y}function u(t,e){return t instanceof Element?[t]:("string"==typeof t&&(t=e.querySelectorAll(t)),Array.prototype.slice.call(t))}function m(t,e,i){t.position="absolute",t.left="50%",t.top="50%",t.width=e+"px",t.height=i+"px",t.transformOrigin="center center 0",t.pointerEvents="none"}function g(t,e,i,n){t.transform="translateX("+(e.x-i/2)+"px)translateY("+(e.y-n/2)+"px)translateZ("+e.z+"px)scale("+e.w/i+", "+e.h/n+")"}a.prototype.add=function(t,i){var o=this;return void 0===i&&(i={}),i=Object.assign({},this.options,i),(t=(t=u(t,this.rootElement)).filter(function(t){return o._isViewportFor(t)})).map(function(e){return(n=i.image,r=e,new Promise(function(e,i){"function"==typeof n&&(n=n(r));var t=document.createElement("img");t.onload=function(t){e(t.target)},t.onerror=function(t){i(t.error)},t.src=n})).then(function(t){o.parallaxElements.push(new s(e,t,i)),o._updateRects()});var n,r})},a.prototype.remove=function(t){t=u(t,document);for(var e=0;e<t.length;++e)this._removeElement(element)},a.prototype._setupStyle=function(){this.rootElement.classList.add(e),this.options.use3d&&this.rootElement.classList.add(n)},a.prototype._monitorRects=function(){var t=this._updateRects.bind(this);window.addEventListener("resize",t),this.options.use3d||this.rootElement.addEventListener("scroll",t)},a.prototype._updateRects=function(){for(var t=this.parallaxElements,e=c(this.rootElement),i=0;i<t.length;++i){var n=c(t[i].element);p(n,e),t[i].updateRect(n,e)}},a.prototype._startRenderLoop=function(){var i=this.parallaxElements;window.requestAnimationFrame(function t(){for(var e=0;e<i.length;++e)i[e].render();window.requestAnimationFrame(t)})},a.prototype._isViewportFor=function(t){return t!==this.rootElement&&t.closest("."+e)===this.rootElement},a.prototype._removeElement=function(t){for(var e=this.parallaxElements,i=0;i<e.length;++i)if(this.parallaxElements[i].element===t)return e[i].dispose(),void e.splice(i,1)};var f=function(t,e,i){var n=this;this.element=t,this.imageWidth=e.naturalWidth,this.imageHeight=e.naturalHeight,this.img=document.createElement("img"),this.style=this.img.style,this.disposed=!1,window.requestAnimationFrame(function(){n.disposed||(n.img.src=e.src,m(n.style,n.imageWidth,n.imageHeight),n.element.prepend(n.img))})};f.prototype.render=function(t){this.disposed||g(this.style,t,this.imageWidth,this.imageHeight)},f.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.element.removeChild(this.img))};var y=function(t){void 0===t&&(t="");var e=i(t);return document.head.appendChild(e),e.sheet}(),v=0,w=function(t,e,i){var n=this;this.element=t,this.imageWidth=e.naturalWidth,this.imageHeight=e.naturalHeight;var r,o,s,a,l=v++;this.className="parallax-background-image-pseudo-"+l,this.style=(r="."+this.className+"::before",s=r+" {}",a=(o=y).insertRule(s,0),o.cssRules[a].style),this.disposed=!1,window.requestAnimationFrame(function(){n.disposed||(n.style.content='""',n.style.backgroundImage="url("+e.src+")",n.style.backgroundSize="100% 100%",m(n.style,n.imageWidth,n.imageHeight),n.element.classList.add(n.className))})};w.prototype.render=function(t){this.disposed||g(this.style,t,this.imageWidth,this.imageHeight)},w.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.element.classList.remove(this.className))},function(t){void 0===t&&(t="");var e=i(t);document.head.insertBefore(e,document.head.firstElementChild),e.sheet}("\n.parallax-background-image-element {\n  position: relative;\n  overflow: hidden !important;\n  background: none !important;\n  background-image: none !important;\n}\n\n.parallax-background-image-element > * {\n  position: relative;\n}\n\n.parallax-background-image-viewport {\n  overflow-x: hidden !important;\n  overflow-y: scroll !important;\n  -webkit-overflow-scrolling: touch;\n}\n\n.parallax-background-image-viewport-3d {\n  perspective: 1px !important;\n  perspective-origin: center center !important;\n}");var x,E={use3d:(x=navigator.userAgent,-1!==x.indexOf("Chrome/")&&-1===x.indexOf("Edge/")),velocity:.8,alignX:"center",renderer:f,image:function(t){var e=window.getComputedStyle(t);return/^url\((['"]?)(.*)\1\)$/.exec(e.backgroundImage)[2]}};return t.createViewport=function(t,e){return void 0===e&&(e={}),e=Object.assign({},E,e),new a(t,e)},t.ImageElementRenderer=f,t.PseudoElementRenderer=w,t}({});