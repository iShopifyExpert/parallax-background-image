var parallax=function(e,l){"use strict";function i(e,t){return void 0===t&&(t=document),e instanceof Element?[e]:("string"==typeof e&&(e=t.querySelectorAll(e)),Array.prototype.slice.call(e))}function o(e,t,n){var r,i;return i="function"==typeof(r=t)?r:function(){return r},(t=function(){return Promise.resolve(i.apply(this,arguments))})(e,n).then(s)}function s(r){return new Promise(function(t,n){var e=document.createElement("img");e.onload=function(e){t(e.target)},e.onerror=function(e){n(e.error)},e.src=r})}function t(){var e=document.createElement("style");return e.appendChild(document.createTextNode("")),e}var n,r,a="parallax-background-image-viewport",u="parallax-background-image-viewport-3d",c="parallax-background-image-element";function d(e){var t=e.getBoundingClientRect();return{x:(t.left+t.right)/2,y:(t.top+t.bottom)/2,width:t.right-t.left,height:t.bottom-t.top}}r=t(),document.head.insertBefore(r,document.head.firstElementChild),(n=r.sheet).insertRule("\n    ."+c+" {\n      position: relative;\n      overflow: hidden;\n    }\n  ",0),n.insertRule("\n    ."+c+" > * {\n      position: relative;\n    }\n  ",0),n.insertRule("\n    ."+a+" {\n      overflow-y: scroll;\n      -webkit-overflow-scrolling: touch;\n    }\n  ",0),n.insertRule("\n    ."+u+" {\n      perspective: 1px;\n      perspective-origin: center center;\n      transform-style: flat;\n    }\n  ",0);var h=function(e,t){var n,r;this.viewport=(n=e,void 0===r&&(r=document),"string"==typeof n?r.querySelector(n):n),this.options=t,this.entries=[],this.viewport.classList.add(a),t.use3d&&this.viewport.classList.add(u),this._observe()};function m(s,a){return function(e,t){var n=e.width,r=t.height+a*(t.height-e.height),i=n/s.naturalWidth,o=r/s.naturalHeight;return{x:0,y:0,z:0,s:Math.max(i,o)}}}function f(n){return function(e,t){return{x:(e.x-t.x)*(1/n-1),y:0,z:1-1/n,s:1/n}}}function p(n){return function(e,t){return{x:0,y:(e.y-t.y)*(n-1),z:0,s:1}}}function v(){for(var l=[],e=arguments.length;e--;)l[e]=arguments[e];return function(e,t){for(var n={x:0,y:0,z:0,s:1},r=0;r<l.length;++r){var i=l[r](e,t),o=i.x,s=i.y,a=i.z,u=i.s;n.x=u*n.x+o,n.y=u*n.y+s,n.z=u*n.z+a,n.s=u*n.s}return n}}function g(s){return l.scheduler.write(function(){s.position="absolute",s.left="50%",s.top="50%",s.transformOrigin="center center 0",s.pointerEvents="none"}),function(e){var t=e.x,n=e.y,r=e.z,i=e.s,o="\n      translate(-50%, -50%)\n      translate3d("+t+"px, "+n+"px, "+r+"px)\n      scale("+i+", "+i+")";l.scheduler.write(function(){s.transform=o})}}function y(t){var n=!1,r=null;return function(e){n&&e.x===r.x&&e.y===r.y&&e.z===r.z&&e.s===r.s||(n=!0,t(r=e))}}h.prototype._observe=function(){var a=this,u=function(){for(var e=d(a.viewport),t=0;t<a.entries.length;++t){var n=a.entries[t],r=n.element,i=n.transform,o=n.renderer,s=i(d(r),e);o.render(s)}l.scheduler.read(u)};l.scheduler.read(u)},h.prototype.add=function(e,n){var r=this;return void 0===n&&(n={}),e=i(e,this.viewport),n=Object.assign({},this.options,n),e.map(function(t){return o(t,n.backgroundImage).then(function(e){r._addElement(t,e,n)})})},h.prototype._addElement=function(e,t,n){this._removeElement(e),e.classList.add(c);var r=n.transform(e,t,n),i=new n.renderer(e,t,n);this.entries.push({element:e,transform:r,renderer:i})},h.prototype.remove=function(e){var t=this;i(e).forEach(function(e){return t._removeElement(e)})},h.prototype._removeElement=function(e){for(var t=0;t<this.entries.length&&this.entries[t].element!==e;)++t;if(t!==this.entries.length){var n=this.entries.splice(t,1)[0];n.element.classList.remove(c),n.renderer.dispose()}};var x=function(e,t,n){var r=this;this.element=e,this.img=document.createElement("img"),l.scheduler.write(function(){r.img.height=t.naturalHeight,r.img.width=t.naturalWidth,r.img.src=t.src,r.element.prepend(r.img)}),this.render=y(g(this.img.style))};x.prototype.dispose=function(){this.element.removeChild(this.img)};var w,b=(w=t(),document.head.appendChild(w),w.sheet),E=0,z=function(e,t,n){this.element=e;var r=E++;this.className="parallax-background-image-pseudo-"+r,this.element.classList.add(this.className);var i="."+this.className+"::before {\n      content: '';\n      width: "+t.naturalWidth+"px;\n      height: "+t.naturalHeight+"px;\n      background-image: url("+t.src+");\n      background-size: 100% 100%;\n    }",o=b.insertRule(i,0),s=b.cssRules[o].style;this.render=y(g(s))};z.prototype.dispose=function(){this.element.classList.remove(this.className)};var k,R={use3d:(k=navigator.userAgent,-1!==k.indexOf("Chrome/")&&-1===k.indexOf("Edge/")),velocity:.8,renderer:x,transform:function(e,t,n){var r=n.use3d?f:p;return v(m(t,n.velocity),r(n.velocity))},backgroundImage:function(e,t){var n=window.getComputedStyle(e);return/url\(['"]?(.*?)['"]?\)/.exec(n.backgroundImage)[1]}};return e.createViewport=function(e,t){return void 0===t&&(t={}),t=Object.assign({},R,t),new h(e,t)},e.coverElement=m,e.parallax2d=p,e.parallax3d=f,e.pipeTransform=v,e.ImageElementRenderer=x,e.PseudoElementRenderer=z,e}({},domScheduler);